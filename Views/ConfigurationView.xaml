<UserControl x:Class="Labb3.Views.ConfigurationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:Labb3.Converter">

    <UserControl.Resources>
        <local:NullToBoolConverter x:Key="NullToBoolConverter"/>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left: List of Question Packs -->
            <StackPanel Grid.Column="0">
                <TextBlock Text="Question Packs" FontWeight="Bold" Margin="0,0,0,10"/>
                <ListBox ItemsSource="{Binding QuestionPacks}" 
                         SelectedItem="{Binding SelectedPack}" 
                         DisplayMemberPath="Name" 
                         Height="300"/>
                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                    <Button Content="New Pack" Command="{Binding NewPackCommand}" Margin="0,0,10,0"/>
                    <Button Content="Play Pack" Command="{Binding PlayPackCommand}" Margin="0,0,10,0"/>
                    <Button Content="Delete Pack" Command="{Binding DeletePackCommand}" Margin="0,0,10,0"/>
                </StackPanel>
            </StackPanel>

            <!-- Right: Selected Pack Details -->
            <StackPanel Grid.Column="1" Margin="20,0,0,0">
                <TextBlock Text="Questions in Pack" FontWeight="Bold" Margin="0,0,0,10"/>
                <ListBox ItemsSource="{Binding SelectedPack.Questions}" 
                         SelectedItem="{Binding SelectedQuestion}" 
                         DisplayMemberPath="Query" 
                         Height="150"/>
                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                    <Button Content="Add Question" Command="{Binding AddQuestionCommand}" Margin="0,0,10,0"/>
                    <Button Content="Remove Question" Command="{Binding RemoveQuestionCommand}"/>
                </StackPanel>

                <!-- Question Editor -->
                <GroupBox Header="Edit Question" Margin="0,20,0,0">
                    <StackPanel>
                        <TextBlock Text="Question:" FontWeight="Bold" Margin="0,5,0,5"/>
                        <TextBox Text="{Binding SelectedQuestion.Query, UpdateSourceTrigger=PropertyChanged}" 
                                 TextWrapping="Wrap" 
                                 MinHeight="40"
                                 IsEnabled="{Binding SelectedQuestion, Converter={StaticResource NullToBoolConverter}}"/>

                        <TextBlock Text="Correct Answer:" FontWeight="Bold" Margin="0,10,0,5"/>
                        <TextBox Text="{Binding SelectedQuestion.Answer, UpdateSourceTrigger=PropertyChanged}"
                                 IsEnabled="{Binding SelectedQuestion, Converter={StaticResource NullToBoolConverter}}"/>

                        <TextBlock Text="Wrong Answer 1:" FontWeight="Bold" Margin="0,10,0,5"/>
                        <TextBox Text="{Binding SelectedQuestion.WrongAnswers[0], UpdateSourceTrigger=PropertyChanged}"
                                 IsEnabled="{Binding SelectedQuestion, Converter={StaticResource NullToBoolConverter}}"/>

                        <TextBlock Text="Wrong Answer 2:" FontWeight="Bold" Margin="0,10,0,5"/>
                        <TextBox Text="{Binding SelectedQuestion.WrongAnswers[1], UpdateSourceTrigger=PropertyChanged}"
                                 IsEnabled="{Binding SelectedQuestion, Converter={StaticResource NullToBoolConverter}}"/>

                        <TextBlock Text="Wrong Answer 3:" FontWeight="Bold" Margin="0,10,0,5"/>
                        <TextBox Text="{Binding SelectedQuestion.WrongAnswers[2], UpdateSourceTrigger=PropertyChanged}"
                                 IsEnabled="{Binding SelectedQuestion, Converter={StaticResource NullToBoolConverter}}"/>
                    </StackPanel>
                </GroupBox>

                <!-- Pack Options -->
                <GroupBox Header="Pack Options" Margin="0,20,0,0">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                            <TextBlock Text="Pack Name:" Width="120"/>
                            <TextBox Text="{Binding SelectedPack.Name, UpdateSourceTrigger=PropertyChanged}" 
                                     Width="200"
                                     IsEnabled="{Binding SelectedPack, Converter={StaticResource NullToBoolConverter}}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                            <TextBlock Text="Difficulty:" Width="120"/>
                            <ComboBox ItemsSource="{Binding DifficultyLevels}" 
                                      SelectedItem="{Binding SelectedPack.Difficulty}" 
                                      Width="200"
                                      IsEnabled="{Binding SelectedPack, Converter={StaticResource NullToBoolConverter}}"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                            <TextBlock Text="Time Limit:" Width="120"/>
                            <TextBox Text="{Binding SelectedPack.TimeLimitInSeconds, UpdateSourceTrigger=PropertyChanged}" 
                                     Width="50"
                                     IsEnabled="{Binding SelectedPack, Converter={StaticResource NullToBoolConverter}}"/>
                            <TextBlock Text="seconds" Margin="5,0,0,0"/>
                        </StackPanel>
                        
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</UserControl>